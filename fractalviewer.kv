
<MainScreen>:
    orientation: 'horizontal'
    display: _display
    color_panel: _color_panel
    ControlPanel:
        size_hint_x: 1.0
    Display:
        id: _display
        size_hint_x: 4.0
    ColorPanel:
        id: _color_panel
        size_hint_x: 1.0

<Display>:
    orientation: 'vertical'
    scene: _scene
    canvas.before:
        Color:
            rgba: [0.3, 0.3, 0.3, 1]
        Rectangle:
            size: self.size
            pos: self.pos
    Image:
        id: _scene
        size_hint: 1.0, 1.0
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        allow_stretch: True

<ColorPanel>:
    orientation: 'vertical'
    padding: 10
    spacing: 10
    hue: _hue
    saturation: _saturation
    brightness: _brightness
    palette_image: _palette_image
    canvas.before:
        Color:
            rgba: [0.2, 0.2, 0.2, 1]
        Rectangle:
            size: self.size
            pos: self.pos
    Label:
        size_hint_y: 1.0
        font_size: root.width * 0.1
        text_size: self.size
        halign: 'left'
        text: 'Coloring'
    ColorContent:
        size_hint_y: 5.0
        id: _hue
        title: 'Hue'
        easing: 'OutExp'
        begin: 0.2
        end: 1.0
    ColorContent:
        size_hint_y: 5.0
        id: _saturation
        title: 'Saturation'
        easing: 'OutExp'
        begin: 1.0
        end: 0.0
    ColorContent:
        size_hint_y: 5.0
        id: _brightness
        title: 'Brightness'
        easing: 'Fixed'
        begin: 1.0
        end: 0.0
    Label:
        size_hint_y: 1.0
        font_size: root.width * 0.1
        text_size: self.size
        halign: 'left'
        text: 'Color Palette'
    Image:
        size_hint_y: 1.0
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        id: _palette_image
        allow_stretch: True
        keep_ratio: False

<ColorContent>:
    orientation: 'vertical'
    spacing: 10
    title: ''
    easing: 'Fixed'
    begin: 1.0
    end: 0.0
    Label:
        size_hint_y: 1.0
        font_size: root.width * 0.1
        text_size: self.size
        halign: 'left'
        text: root.title
    GridLayout:
        size_hint_y: 3.0
        cols: 2
        Label:
            size_hint_x: 1.0
            text: 'easing'
        Spinner:
            size_hint_x: 3.0
            size_hint_y: 1.0
            text: root.easing
            values: root.values
            on_text: root.change_easing(self.text)
        Label:
            text: 'begin'
        Slider:
            size_hint_y: 1.0
            min: 0.0
            max: 1.0
            value: root.begin
            on_value: root.change_begin(self.value)
        Label:
            text: 'end'
        Slider:
            size_hint_y: 1.0
            min: 0.0
            max: 1.0
            value: root.end
            on_value: root.change_end(self.value)
            disabled: root.easing == 'Fixed'

<ControlPanel>:
    orientation: 'vertical'
    padding: 10
    spacing: 10
    fractal_type: 'julia'
    x: 0.0
    y: 0.0
    cx: -0.3
    cy: -0.63
    image_size: 800
    steps: 800
    scale: 1.0
    canvas.before:
        Color:
            rgba: [0.2, 0.2, 0.2, 1]
        Rectangle:
            size: self.size
            pos: self.pos
    BoxLayout:
        orientation: 'vertical'
        size_hint_y: 1.0
        spacing: 10
        Label:
            font_size: root.width * 0.1
            text_size: self.size
            halign: 'left'
            text: 'Fractal Type'
        Spinner:
            text: root.fractal_type
            values: root.values
            on_text: root.change_fractal_type(self.text)
    BoxLayout:
        orientation: 'vertical'
        size_hint_y: 1.5
        spacing: 10
        Label:
            font_size: root.width * 0.1
            text_size: self.size
            halign: 'left'
            text: 'Center Position'
        GridLayout:
            cols: 2
            Label:
                size_hint_x: 1.0
                text: 'x'
            TextInput:
                size_hint_x: 4.0
                text: '{:09.2e}'.format(root.x)
                multiline: False
            Label:
                text: 'y'
            TextInput:
                text: '{:09.2e}'.format(root.y)
                multiline: False
    BoxLayout:
        orientation: 'vertical'
        size_hint_y: 1.5
        spacing: 10
        Label:
            font_size: root.width * 0.1
            text_size: self.size
            halign: 'left'
            text: 'Constant'
        GridLayout:
            cols: 2
            Label:
                size_hint_x: 1.0
                text: 'cx'
            TextInput:
                size_hint_x: 4.0
                text: '{:09.2e}'.format(root.cx)
                multiline: False
                on_text_validate: root.change_cx(self.text)
                disabled: root.fractal_type == 'mandelbrot'
            Label:
                text: 'cy'
            TextInput:
                text: '{:09.2e}'.format(root.cy)
                multiline: False
                on_text_validate: root.change_cy(self.text)
                disabled: root.fractal_type == 'mandelbrot'
    BoxLayout:
        orientation: 'vertical'
        size_hint_y: 1.0
        spacing: 10
        Label:
            font_size: root.width * 0.1
            text_size: self.size
            halign: 'left'
            text: 'Image Size'
        TextInput:
            text: '{}'.format(root.image_size)
            multiline: False
    BoxLayout:
        orientation: 'vertical'
        size_hint_y: 1.0
        spacing: 10
        Label:
            font_size: root.width * 0.1
            text_size: self.size
            halign: 'left'
            text: 'Steps'
        TextInput:
            text: '{}'.format(root.steps)
            multiline: False
    BoxLayout:
        orientation: 'vertical'
        size_hint_y: 1.0
        spacing: 10
        Label:
            font_size: root.width * 0.1
            text_size: self.size
            halign: 'left'
            text: 'Scale'
        TextInput:
            text: '{}'.format(root.scale)
            multiline: False
    BoxLayout:
        orientation: 'vertical'
        size_hint_y: 1.5
        spacing: 10
        Button:
            text: 'Run'
        Button:
            text: 'Save'
