
<MainScreen>:
    cols: 2
    display: _display
    color_panel: _color_panel
    Display:
        id: _display
        size_hint: 4.0, 3.0

    ColorPanel:
        id: _color_panel
        size_hint: 1.0, 1.0
    FractalPanel:
        size_hint: 1.0, 1.0
    ControlPanel:
        size_hint: 1.0, 1.0

<Display>:
    orientation: 'vertical'
    scene: _scene
    canvas.before:
        Color:
            rgba: [0.3, 0.3, 0.3, 1]
        Rectangle:
            size: self.size
            pos: self.pos
    Image:
        id: _scene
        size_hint: None, None
        width: root.height
        height: root.height
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}

<ColorPanel@BoxLayout>:
    orientation: 'vertical'
    padding: 10
    spacing: 10
    hue: _hue
    saturation: _saturation
    brightness: _brightness
    palette_image: _palette_image
    canvas.before:
        Color:
            rgba: [0.2, 0.2, 0.2, 1]
        Rectangle:
            size: self.size
            pos: self.pos
    ColorContent:
        size_hint_y: 4.0
        id: _hue
        title: 'Hue'
        easing: 'OutSine'
        begin: 0.2
        end: 0.5
    ColorContent:
        size_hint_y: 4.0
        id: _saturation
        title: 'Saturation'
        easing: 'Linear'
        begin: 1.0
        end: 1.0
    ColorContent:
        size_hint_y: 4.0
        id: _brightness
        title: 'Brightness'
        easing: 'OutSine'
        begin: 1.0
        end: 0.0
    Image:
        size_hint_y: 1.0
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        id: _palette_image
        allow_stretch: True
        keep_ratio: False
    Button:
        size_hint_y: 1.0
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        text: 'Apply'
        on_release: root.apply()

<ColorContent>:
    orientation: 'vertical'
    spacing: 10
    title: ''
    easing: 'Fixed'
    begin: 1.0
    end: 0.0
    end_slider: _end_slider
    Label:
        size_hint_y: 1.0
        font_size: self.height * 0.5
        text_size: self.size
        halign: 'left'
        text: root.title
    GridLayout:
        size_hint_y: 3.0
        cols: 2
        Label:
            size_hint_x: 1.0
            text: 'easing'
        Spinner:
            size_hint_x: 3.0
            size_hint_y: 1.0
            text: root.easing
            values: root.values
            on_text: root.change_easing(self.text)
        Label:
            text: 'begin'
        Slider:
            size_hint_y: 1.0
            min: 0.0
            max: 1.0
            value: root.begin
            on_value: root.change_begin(self.value)
        Label:
            text: 'end'
        Slider:
            size_hint_y: 1.0
            id: _end_slider
            min: 0.0
            max: 1.0
            value: root.end
            on_value: root.change_end(self.value)

<FractalPanel@Widget>:
    canvas.before:
        Color:
            rgba: [1, 1, 0, 1]
        Rectangle:
            size: self.size
            pos: self.pos

<ControlPanel@Widget>:
    canvas.before:
        Color:
            rgba: [0, 0, 1, 1]
        Rectangle:
            size: self.size
            pos: self.pos


MainScreen: